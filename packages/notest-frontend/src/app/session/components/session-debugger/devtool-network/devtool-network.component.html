<div class="filters">
  <input [(ngModel)]="filters.path" (ngModelChange)="updateFilteredRequests()" placeholder="Filter by path"
         title="Optionally you can use a regexp too"/>
  <input [(ngModel)]="filters.status" (ngModelChange)="updateFilteredRequests()" placeholder="Filter by status code"/>
  <input [(ngModel)]="filters.method" (ngModelChange)="updateFilteredRequests()" placeholder="Filter by method"/>
</div>
<div class="netwok-table-container">
  <bl-loading *ngIf="loading"></bl-loading>
  <table *ngIf="!loading" class="bl-table" #table>
    <tr>
      <th resize style="width: 160px">Path</th>
      <th resize style="width: 60px">Method/Status</th>
      <th resize>Request</th>
      <th resize style="width: 120px">Time</th>
    </tr>
    <tbody>
    <ng-container *ngFor="let r of filteredRequests; let i = index">
      <ng-container *ngIf="r.request">
        <tr (click)="onRequestClick(r.request)" [class.even]="i % 2 == 0" [class.odd]="i % 2 != 0"
            [class.highlight]="highlight[i]"
            class="cursor-pointer">
          <td [title]="r.request.url" class="address">&lrm;{{r.request.request.path}}</td>
          <td>{{r.request.request.method}}/{{r.request.status}}</td>
          <td [title]="r.request.preview">{{r.request.preview}}</td>
          <td [title]="r.request.timestamp | formatDate: 'HH:mm:ss'">
            <bl-event-time [timestamp]="r.timestamp"></bl-event-time>
          </td>
        </tr>
        <tr *ngIf="r.request.show">
          <td class="json-view" colspan="5">
            <bl-loading *ngIf="r.request.loading"></bl-loading>
            <bl-json-viewer *ngIf="!r.request.loading"
                            [json]="{url: r.request.data.request.url, request: r.request.data.request, response: r.request.data.response || r.request.data.error || {}}"></bl-json-viewer>
          </td>
        </tr>
      </ng-container>
    </ng-container>
    <tr>
      <div class="h-10"></div>
    </tr>
    </tbody>
  </table>
</div>
