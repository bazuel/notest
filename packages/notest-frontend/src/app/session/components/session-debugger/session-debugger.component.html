<div *ngIf="session" class="w-full h-full flex">
  <div class="h-full flex-1 overflow-auto scrollbar-sm">
    <div class="flex flex-row items-center p-4">
      <input class="input-on-focus font-semibold text-gray-500" [(ngModel)]="session.info.title"
             (ngModelChange)="debouncedSaveSession()"/>
      <button class="ml-10 h-1/3" *ngIf="ready" title="Go to session Preview Mode" (click)="goTo()">Session Preview
      </button>
    </div>
    <nt-player class="w-3/4 m-5" *ngIf="ready" [session]="eventList"></nt-player>
    <div class="flex flex-row">
      <div class="flex items-center">
        <button class="m-4 bo-button" *ngIf="ready" (click)="getSessionTest()">Generate test e2e</button>
        <button class="m-4 bo-button" *ngIf="ready && session.info?.e2eScript" (click)="showScript = true">Show test e2e</button>
      </div>
      <div *ngIf="!script && generatingScript" class="flex flex-row items-center justify-center">
        <div class="bo-loading m-4"></div>
        <div class="text-nt-300 text-bold">Generating Script...</div>
      </div>
    </div>
    <nt-popup *ngIf="showScript" (close)="showScript = false" (clickOutside)="showScript = false">
      <nt-codemirror-editor
        [script]="session.info.e2eScript"
        class="editor"
        label="Test e2e">
      </nt-codemirror-editor>
    </nt-popup>
  </div>
  <bl-session-devtool [events]="eventList"></bl-session-devtool>

</div>
